{% extends "AppBundle::layout.html.twig" %}

{% block navbar_options %}
<li class="dropdown user user-menu">	
	<a href="#" class="dropdown-toggle" data-toggle="dropdown">				    	    
        <strong>{{ usuario }}</strong>               
	</a>			
    <ul class="dropdown-menu">
    	<!-- User image -->
        <li class="user-header">
        	<h1><span class="glyphicon glyphicon-user" style="color:white;"></span></h1>       	
            <p>            	
            	<strong>{{ usuario }} </strong><br>    
				<strong>{{ rol }}</strong>            	        	
            	<small>{{ email }}</small>
            </p>
  		</li>        
        <!-- Menu Footer-->
        <li class="user-footer">        	
            <div class="col-xs-12">
            	<a href="{{ path('index') }}" class="btn btn-danger btn-block">
            		<strong>
            			<i class="fa fa-power-off"></i>
            			&nbsp;&nbsp;&nbsp;Cerrar Sesi&oacute;n
            		</strong>
            	</a>
            </div>
		</li>
	</ul>	
</li>

{% endblock %}

{% block menu_usuario %}

{% if rol == "Administrador General" %}
	<li class="treeview">
		<a href="#">
	    	<i class="fa fa-building-o"></i><span>  Hoteles</span>
	    	<span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	        </span>
		</a>
	    <ul class="treeview-menu">
	    	<li><a href="{{ path('listar_hoteles') }}"><i class="fa fa-arrow-circle-o-right"></i> Lista de Hoteles</a></li>
	        <li><a href="{{ path('listar_caracteristica_hotel') }}"><i class="fa fa-arrow-circle-o-right"></i>Caracteristicas Hotel</a></li>                        
	   	</ul>
	</li>
	<li class="treeview">
		<a href="#">
	    	<i class="fa fa-hotel"></i><span>  Habitaciones</span>
	        <span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	        </span>
	    </a>
	    <ul class="treeview-menu">
	    	<li><a href="{{ path('listar_habitaciones_disponibilidad') }}"><i class="fa fa-arrow-circle-o-right"></i>Lista de Habitaciones</a></li>
	        <li><a href="{{ path('listar_caracteristicas_habitacion') }}"><i class="fa fa-arrow-circle-o-right"></i>Caracteristicas Habitaci&oacute;n</a></li>
	        <li><a href="{{ path('listar_tipos_habitacion') }}"><i class="fa fa-arrow-circle-o-right"></i>Tipos de Habitaci&oacute;n</a></li>
	        <li><a href="{{ path('listar_servicios_habitacion') }}"><i class="fa fa-arrow-circle-o-right"></i>Servicios de Habitaci&oacute;n</a></li>
	  	</ul>
	</li>
	<li class="treeview">
		<a href="#">
	    	<i class="fa fa-user"></i><span>  Administracion permisos</span>                    	
	        <span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	        </span>
	 	</a>
	    <ul class="treeview-menu">
	    	<li><a href="{{ path('listar_recursos') }}"><i class="fa  fa-arrow-circle-o-right "></i> Recursos</a></li>
	        <li><a href="{{ path('listar_roles') }}"><i class="fa fa-arrow-circle-o-right"></i> Roles</a></li>
	        <li><a href="{{ path('listar_usuarios') }}"><i class="fa fa-arrow-circle-o-right"></i> Usuarios</a></li>
	  	</ul>
	</li>
	<li class="treeview">
		<a href="#">
			<i class="fa fa-search"></i><span>   B&uacute;squedas</span>
			<span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	      	</span>
		</a>
		<ul class="treeview-menu">
			<li><a href="{{ path('buscar_disponibilidad') }}"><i class="fa  fa-arrow-circle-o-right "></i> Habitacion Disponible</a></li>	
		</ul>
	</li>
	<li class="active treeview">
		<a href="#">
	    	<i class="fa fa-calendar"></i><span>   Reportes</span>
	        <span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	      	</span>                		
	 	</a>
	    <ul class="treeview-menu">
	    	<li class="active"><a href="{{ path('reporte_mensual') }}"><i class="fa  fa-arrow-circle-o-right "></i> Mensual</a></li>
	   	</ul>
	</li>
	<li class="treeview">
		<a href="#">
	    	<i class="fa fa-download"></i><span>   Descargas</span>
	        <span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	       	</span>
	 	</a>
	    <ul class="treeview-menu">
	    	<li><a href="/bin/Manual_Hoteles_Nacionales-Administrador_Sistema.pdf" download="Manual_General"><i class="fa  fa-arrow-circle-o-right "></i> Manual</a></li>
	   	</ul>
	</li>   
	<li class="treeview">
		<a href="{{ path('contactos') }}">
			<i class="fa fa-envelope"></i><span>   Contacto</span>                		
	   	</a>                	
	</li>
{% endif %}

{% if rol == "Administrador" %}
	<li class="active treeview">
		<a href="#">
	    	<i class="fa fa-building-o"></i><span>  Hoteles</span>
	    	<span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	        </span>
		</a>
	    <ul class="treeview-menu">
	    	<li class="active"><a href="{{ path('listar_hoteles') }}"><i class="fa fa-arrow-circle-o-right"></i> Lista de Hoteles</a></li>	                                
	   	</ul>
	</li>
	<li class="treeview">
		<a href="#">
	    	<i class="fa fa-hotel"></i><span>  Habitaciones</span>
	        <span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	        </span>
	    </a>
	    <ul class="treeview-menu">
	    	<li><a href="{{ path('listar_habitaciones_disponibilidad') }}"><i class="fa fa-arrow-circle-o-right"></i>Lista de Habitaciones</a></li>	        
	  	</ul>
	</li>
	<li class="treeview">
		<a href="#">
	    	<i class="fa fa-user"></i><span>  Administracion permisos</span>                    	
	        <span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	        </span>
	 	</a>
	    <ul class="treeview-menu">	    	
	        <li><a href="{{ path('listar_usuarios') }}"><i class="fa fa-arrow-circle-o-right"></i> Usuarios</a></li>
	  	</ul>
	</li>
	<li class="treeview">
		<a href="#">
			<i class="fa fa-search"></i><span>   B&uacute;squedas</span>
			<span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	      	</span>
		</a>
		<ul class="treeview-menu">
			<li><a href="{{ path('buscar_disponibilidad') }}"><i class="fa  fa-arrow-circle-o-right "></i> Habitacion Disponible</a></li>	
		</ul>
	</li>
	<li class="treeview">
		<a href="#">
	    	<i class="fa fa-calendar"></i><span>   Reportes</span>
	        <span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	      	</span>                		
	 	</a>
	    <ul class="treeview-menu">
	    	<li><a href="{{ path('reporte_mensual') }}"><i class="fa  fa-arrow-circle-o-right "></i> Mensual</a></li>
	   	</ul>
	</li>
	<li class="treeview">
		<a href="#">
	    	<i class="fa fa-download"></i><span>   Descargas</span>
	        <span class="pull-right-container">
	        	<i class="fa fa-angle-left pull-right"></i>
	       	</span>
	 	</a>
	    <ul class="treeview-menu">
	    	<li><a href="/bin/Manual_Hoteles_Nacionales-Administrador.pdf" download="Manual_Administrador"><i class="fa  fa-arrow-circle-o-right "></i> Manual</a></li>
	   	</ul>
	</li>   
	<li class="treeview">
		<a href="{{ path('contactos') }}">
			<i class="fa fa-envelope"></i><span>   Contacto</span>                		
	   	</a>                	
	</li>

{% endif %}



{% endblock %}

{% block contenido %}

<div class="row">
	<form class="form-inline" action="{{ path('generar_mensual') }}" method="POST" role="form">
		<div class="col-md-12 text-center">
			<div class="form-group">
				<label for="idHotel" class="label label-default">&nbsp;&nbsp;&nbsp;HOTEL:&nbsp;&nbsp;&nbsp;</label>
				<select class="form-control" name="idHotel" id="idHotel">
					{% for hotel in hoteles %}
						<option value="{{ hotel.idhotel }}">{{ hotel.hotnombre }}</option>
					{% endfor %}									
				</select>				
			</div>
			<div class="form-group">
				<label for="mes" class="label label-default">&nbsp;&nbsp;&nbsp;MES:&nbsp;&nbsp;&nbsp;</label>
				<select class="form-control" name="mes" id="mes">
					{% if mes == "" %}				
					<option value="01">Enero</option>
					<option value="02">Febrero</option>
					<option value="03">Marzo</option>
					<option value="04">Abril</option>
					<option value="05">Mayo</option>
					<option value="06">Junio</option>
					<option value="07">Julio</option>
					<option value="08">Agosto</option>
					<option value="09">Septiembre</option>
					<option value="10">Octubre</option>
					<option value="11">Noviembre</option>					
					<option value="12">Diciembre</option>
					{% endif %}
					{% if mes != "" %}
					{% if mes == 1 %}				
					<option value="01" selected>Enero</option>
					{% else %}
					<option value="01">Enero</option>
					{% endif %}
					{% if mes == 2 %}
					<option value="02" selected>Febrero</option>
					{% else %}
					<option value="02">Febrero</option>
					{% endif %}
					{% if mes == 3 %}
					<option value="03" selected>Marzo</option>
					{% else %}
					<option value="03">Marzo</option>
					{% endif %}
					{% if mes == 4 %}
					<option value="04" selected>Abril</option>
					{% else %}
					<option value="04">Abril</option>
					{% endif %}
					{% if mes == 5 %}
					<option value="05" selected>Mayo</option>
					{% else %}
					<option value="05">Mayo</option>
					{% endif %}
					{% if mes == 6 %}
					<option value="06" selected>Junio</option>
					{% else %}
					<option value="06">Junio</option>
					{% endif %}
					{% if mes == 7 %}
					<option value="07" selected>Julio</option>
					{% else %}
					<option value="07">Julio</option>
					{% endif %}
					{% if mes == 8 %}
					<option value="08" selected>Agosto</option>
					{% else %}
					<option value="08">Agosto</option>
					{% endif %}
					{% if mes == 9 %}
					<option value="09" selected>Septiembre</option>
					{% else %}
					<option value="09">Septiembre</option>
					{% endif %}
					{% if mes == 10 %}
					<option value="10" selected>Octubre</option>
					{% else %}
					<option value="10">Octubre</option>
					{% endif %}
					{% if mes == 11 %}
					<option value="11" selected>Noviembre</option>
					{% else %}
					<option value="11">Noviembre</option>
					{% endif %}
					{% if mes == 12 %}					
					<option value="12" selected>Diciembre</option>
					{% else %}
					<option value="12">Diciembre</option>
					{% endif %}
					{% endif %}
				</select>
			</div>
			<div class="form-group">
				<label for="anio" class="label label-default">&nbsp;&nbsp;&nbsp;AÑO:&nbsp;&nbsp;&nbsp;</label>
				<select class="form-control" name="anio" id="anio">
					<option value="2019">2019</option>
					<option value="2018">2018</option>
					<option value="2017">2017</option>
				</select>
			</div>	
			<button type="submit" class="btn btn-primary">
				Procesar				
			</button>		
		</div>		
	</form>
</div>

{% if total != "" %}
<br><br>
<div class="row">
	<div class="col-md-offset-3 col-md-6">
		<div class="panel panel-default">
			<div class="panel-heading">
				<div class="panel-title text-center">
					<strong>REPORTE MENSUAL POR HABITACI&Oacute;N</strong>
				</div>
			</div>
			<div class="panel-body">
			<table class="table table-striped">
				<thead>
					<tr>
						<td class="text-left"><strong>HABITACI&Oacute;N</strong></td>
						<td class="text-left"><strong>TIPO</strong></td>
						<td class="text-right"><strong>MONTO RESERVA (USD)</strong></td>
					</tr>
				</thead>
				<tbody>
					{% for hab in habitaciones %}
					<tr>
						<td class="text-left">{{ hab.habdsc }}</td>
						<td class="text-left">{{ hab.tipdsc }}</td>
						<td class="text-right">{{ hab.revmontoreserva }}</td>
						<td class="text-right">											
						 	<form role="form" action="{{ path('generar_detalle_mensual') }}" method="POST">
							<input type="text" name="nombreHabitacion" value="{{hab.habdsc}}" hidden/>
							<input type="text" name="tipoHabitacion" value="{{hab.tipdsc}}" hidden/>	
							<input type="text" name="idHabitacion" value="{{hab.idhabitacion}}" hidden/>
							<input type="text" name="idHotel" value="{{hab.idhotel}}" hidden/>
							<input type="text" name="mes" value="{{hab.mes}}" hidden/>
							<input type="text" name="anio" value="{{hab.anio}}" hidden/>	
							<button type="submit" class="btn btn-primary" data-toggle="tooltip" title="Detalle">								
							<i class="fa fa-list"></i>															
						</button>							
					</form>					
						</td>
					</tr>
					{% endfor %}
					<tr >
						<td></td>
						<td class="text-right"><h4><strong>TOTAL (USD):</strong></h4></td>
						<td class="text-right"><h4><strong>{{ total }}</strong></h4></td>
					</tr>
				</tbody>
			</table>			
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-md-offset-7 col-md-2">
		<button class="btn btn-block btn-danger sr-only">
			<span class="glyphicon glyphicon-print"></span>
			&nbsp;&nbsp;&nbsp;IMPRIMIR
		</button>
	</div>
</div>	
{% endif %}



{% endblock %}